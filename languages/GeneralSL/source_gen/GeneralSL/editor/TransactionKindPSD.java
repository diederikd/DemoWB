package GeneralSL.editor;

/*Generated by MPS */

import de.itemis.mps.editor.diagram.runtime.shape.AbstractShape;
import org.jetbrains.annotations.Nullable;
import java.awt.Shape;
import java.awt.geom.Rectangle2D;
import java.awt.geom.GeneralPath;
import java.awt.image.BufferedImage;
import java.awt.Graphics2D;
import java.awt.Font;
import java.awt.font.GlyphVector;
import de.itemis.mps.editor.diagram.runtime.shape.IShapeStyle;

public class TransactionKindPSD extends AbstractShape {


  public TransactionKindPSD() {
  }

  @Nullable
  @Override
  public Double getDefaultSize() {
    return ((double) (15));
  }

  @Override
  public Shape getShape(final Rectangle2D bounds) {
    GeneralPath shape = new GeneralPath();
    double width = bounds.getWidth();
    double height = bounds.getHeight();
    double x = bounds.getX() + width / 2;
    double y = bounds.getY() + height / 2;
    double r = 30;
    double w = 75;
    double kappa = 0.5522847498;


    shape.moveTo(x, y - r);
    shape.lineTo(x + w, y - r);
    shape.curveTo(x + w + r * kappa, y - r, x + w + r, y - r * kappa, x + w + r, y);
    shape.curveTo(x + w + r, y + r * kappa, x + w + r * kappa, y + r, x + w, y + r);
    shape.lineTo(x - w, y + r);
    shape.curveTo(x - w - r * kappa, y + r, x - w - r, y + r * kappa, x - w - r, y);
    shape.curveTo(x - w - r, y - r * kappa, x - w - r * kappa, y - r, x - w, y - r);
    shape.lineTo(x, y - r);

    shape.moveTo(x - r, y);
    shape.lineTo(x, y - r);
    shape.lineTo(x + r, y);
    shape.lineTo(x, y + r);
    shape.closePath();

    // TODO how to print the name of the transaction 
    BufferedImage img = new BufferedImage(100, 100, BufferedImage.TYPE_INT_ARGB);
    Graphics2D g2 = img.createGraphics();
    Font font = new Font("Arial", Font.PLAIN, 10);
    String s = "TEST";
    Shape shp;
    try {
      GlyphVector vect = font.createGlyphVector(g2.getFontRenderContext(), s);
      shp = vect.getOutline(0xf, (float) -vect.getVisualBounds().getY());
    } finally {
      g2.dispose();
    }
    // TODO how to print the name of the transaction 

    return shape;
  }


  @Override
  protected void draw(final Graphics2D graphics, final Rectangle2D bounds, IShapeStyle style) {
    // TODO how to print the name of the transaction 
    float width = (float) bounds.getWidth();
    float height = (float) bounds.getHeight();
    graphics.drawString("TEXT", width - 10, height - 10);
  }

}
